From 5c8827df27f2d88a21eecbe2ec577ff0a6187506 Mon Sep 17 00:00:00 2001
From: Michelle McDaniel <adiaaida@gmail.com>
Date: Mon, 11 Dec 2017 07:53:30 -0800
Subject: [PATCH] Fix non-PR perf pipeline job (#15438)

---
 buildpipeline/perf-pipeline.groovy     | 6 ++++--
 buildpipeline/perf_pipelinejobs.groovy | 2 +-
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/buildpipeline/perf-pipeline.groovy b/buildpipeline/perf-pipeline.groovy
index 88b6925..04eaadf 100644
--- a/buildpipeline/perf-pipeline.groovy
+++ b/buildpipeline/perf-pipeline.groovy
@@ -375,17 +375,19 @@ def innerLoopTests = [:]
 def outerLoopTests = [:]
 
 if (!isPR()) {
-    outerLoopTests["windows ${arch} ryujit full_opt pgo${baseline} jitbench"] = {
+    ['x64', 'x86'].each { arch ->
+        outerLoopTests["windows ${arch} ryujit full_opt pgo jitbench"] = {
             simpleNode('windows_server_2016_clr_perf', 180) {
                 windowsPerf(arch, config, uploadString, runType, 'full_opt', 'ryujit', 'pgo', 'jitbench', false, false, '')
             }
         }
 
-    outerLoopTests["windows ${arch} ryujit full_opt pgo${baseline} illink"] = {
+        outerLoopTests["windows ${arch} ryujit full_opt pgo illink"] = {
             simpleNode('Windows_NT', '20170427-elevated') {
                 windowsPerf(arch, config, uploadString, runType, 'full_opt', 'ryujit', 'pgo', 'illink', false, false, '')
             }
         }
+    }
 
     ['x64', 'x86'].each { arch ->
         ['min_opt', 'full_opt'].each { opt_level ->
diff --git a/buildpipeline/perf_pipelinejobs.groovy b/buildpipeline/perf_pipelinejobs.groovy
index 49be5a7..26e118a 100644
--- a/buildpipeline/perf_pipelinejobs.groovy
+++ b/buildpipeline/perf_pipelinejobs.groovy
@@ -32,4 +32,4 @@ pipeline.triggerPipelineOnGithubPRComment(triggerName, params)
 
 // Disable automatic PR runs until throughput issues are addressed.
 // pipeline.triggerPipelineOnEveryGithubPR(triggerName, params)
-pipeline.triggerPipelinePeriodically('*/12 * * * *')
+pipeline.triggerPipelinePeriodically('*/12 * * * *', params)
-- 
2.7.4

